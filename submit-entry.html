<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Submit Your Entry - British Trade Awards</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">

  <!-- Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- Stripe -->
  <script src="https://js.stripe.com/v3/"></script>

  <style>
    :root {
      --primary-color: #0d6efd;
      --secondary-color: #6c757d;
    }

    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 40px 0;
    }

    .submission-container {
      max-width: 900px;
      margin: 0 auto;
    }

    .submission-card {
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    .card-header-custom {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px;
      text-align: center;
    }

    .card-header-custom h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .card-header-custom p {
      font-size: 1.1rem;
      opacity: 0.9;
    }

    .form-section {
      padding: 40px;
    }

    .section-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: #1a1a1a;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e9ecef;
    }

    .section-title i {
      color: var(--primary-color);
    }

    .required-asterisk {
      color: #dc3545;
    }

    .file-upload-zone {
      border: 2px dashed #dee2e6;
      border-radius: 8px;
      padding: 40px;
      text-align: center;
      transition: all 0.3s;
      cursor: pointer;
    }

    .file-upload-zone:hover {
      border-color: var(--primary-color);
      background-color: #f8f9fa;
    }

    .file-upload-zone.dragover {
      border-color: var(--primary-color);
      background-color: rgba(13, 110, 253, 0.1);
    }

    .uploaded-file {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px;
      background: #f8f9fa;
      border-radius: 8px;
      margin-bottom: 8px;
    }

    .fee-summary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 12px;
      margin-top: 30px;
    }

    .fee-summary h4 {
      font-size: 1.3rem;
      margin-bottom: 20px;
    }

    .fee-line {
      display: flex;
      justify-content: space-between;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .fee-total {
      border-top: 2px solid rgba(255,255,255,0.3);
      padding-top: 15px;
      margin-top: 15px;
      font-size: 1.5rem;
      font-weight: 700;
    }

    .progress-steps {
      display: flex;
      justify-content: space-between;
      padding: 30px 40px;
      background: #f8f9fa;
      border-bottom: 1px solid #dee2e6;
    }

    .progress-step {
      flex: 1;
      text-align: center;
      position: relative;
    }

    .progress-step:not(:last-child)::after {
      content: '';
      position: absolute;
      top: 20px;
      right: -50%;
      width: 100%;
      height: 2px;
      background: #dee2e6;
      z-index: 0;
    }

    .progress-step.active:not(:last-child)::after {
      background: var(--primary-color);
    }

    .progress-step-circle {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: white;
      border: 2px solid #dee2e6;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      position: relative;
      z-index: 1;
    }

    .progress-step.active .progress-step-circle {
      background: var(--primary-color);
      border-color: var(--primary-color);
      color: white;
    }

    .progress-step.completed .progress-step-circle {
      background: #28a745;
      border-color: #28a745;
      color: white;
    }

    .btn-submit-entry {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      color: white;
      padding: 15px 50px;
      font-size: 1.2rem;
      font-weight: 600;
      border-radius: 8px;
      transition: transform 0.2s;
    }

    .btn-submit-entry:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>

  <div class="submission-container">
    <div class="submission-card">

      <!-- Header -->
      <div class="card-header-custom">
        <h1>üèÜ Submit Your Entry</h1>
        <p>British Trade Awards 2025</p>
      </div>

      <!-- Progress Steps -->
      <div class="progress-steps" id="progressSteps">
        <div class="progress-step active" data-step="1">
          <div class="progress-step-circle">1</div>
          <small class="d-block mt-2">Details</small>
        </div>
        <div class="progress-step" data-step="2">
          <div class="progress-step-circle">2</div>
          <small class="d-block mt-2">Upload</small>
        </div>
        <div class="progress-step" data-step="3">
          <div class="progress-step-circle">3</div>
          <small class="d-block mt-2">Review</small>
        </div>
        <div class="progress-step" data-step="4">
          <div class="progress-step-circle">4</div>
          <small class="d-block mt-2">Payment</small>
        </div>
      </div>

      <!-- Form -->
      <form id="entrySubmissionForm" class="form-section">

        <!-- Step 1: Entry Details -->
        <div class="form-step" id="step1">
          <h2 class="section-title">
            <i class="bi bi-info-circle me-2"></i>Entry Details
          </h2>

          <!-- Company Information -->
          <div class="mb-4">
            <label class="form-label fw-bold">
              Company/Organisation <span class="required-asterisk">*</span>
            </label>
            <select class="form-select form-select-lg" id="companySelect" required>
              <option value="">Select or create your company...</option>
              <option value="new">+ Add New Company</option>
            </select>
          </div>

          <!-- New Company Fields (hidden by default) -->
          <div id="newCompanyFields" style="display: none;" class="mb-4">
            <div class="card">
              <div class="card-body">
                <h6 class="card-title">New Company Details</h6>
                <div class="row g-3">
                  <div class="col-md-6">
                    <label class="form-label">Company Name <span class="required-asterisk">*</span></label>
                    <input type="text" class="form-control" id="newCompanyName">
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">Website</label>
                    <input type="url" class="form-control" id="newCompanyWebsite" placeholder="https://">
                  </div>
                  <div class="col-12">
                    <label class="form-label">Company Description</label>
                    <textarea class="form-control" id="newCompanyDescription" rows="2"></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Award Category -->
          <div class="mb-4">
            <label class="form-label fw-bold">
              Award Category <span class="required-asterisk">*</span>
            </label>
            <select class="form-select form-select-lg" id="awardSelect" required>
              <option value="">Select award category...</option>
            </select>
          </div>

          <!-- Entry Title -->
          <div class="mb-4">
            <label class="form-label fw-bold">
              Entry Title <span class="required-asterisk">*</span>
            </label>
            <input type="text" class="form-control form-control-lg" id="entryTitle" required
                   placeholder="Give your entry a compelling title...">
            <div class="form-text">
              Maximum 500 characters. This will appear in public listings.
            </div>
          </div>

          <!-- Entry Description -->
          <div class="mb-4">
            <label class="form-label fw-bold">
              Entry Description
            </label>
            <textarea class="form-control" id="entryDescription" rows="4"
                      placeholder="Brief overview of your entry..."></textarea>
          </div>

          <!-- Why Should Win -->
          <div class="mb-4">
            <label class="form-label fw-bold">
              Why Should You Win? <span class="required-asterisk">*</span>
            </label>
            <textarea class="form-control" id="whyShouldWin" rows="8" required
                      placeholder="Explain why your company deserves this award..."></textarea>
            <div class="form-text">
              This is your main submission. Be detailed and compelling.
            </div>
          </div>

          <!-- Supporting Information -->
          <div class="mb-4">
            <label class="form-label fw-bold">
              Supporting Information
            </label>
            <textarea class="form-control" id="supportingInfo" rows="6"
                      placeholder="Additional information, metrics, testimonials..."></textarea>
          </div>

          <!-- Contact Information -->
          <h2 class="section-title mt-5">
            <i class="bi bi-person me-2"></i>Contact Information
          </h2>

          <div class="row g-3 mb-4">
            <div class="col-md-6">
              <label class="form-label fw-bold">
                Your Name <span class="required-asterisk">*</span>
              </label>
              <input type="text" class="form-control" id="contactName" required>
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">
                Position/Title
              </label>
              <input type="text" class="form-control" id="contactPosition">
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">
                Email Address <span class="required-asterisk">*</span>
              </label>
              <input type="email" class="form-control" id="contactEmail" required>
            </div>
            <div class="col-md-6">
              <label class="form-label fw-bold">
                Phone Number
              </label>
              <input type="tel" class="form-control" id="contactPhone">
            </div>
          </div>

          <div class="d-flex justify-content-end">
            <button type="button" class="btn btn-primary btn-lg" onclick="submissionForm.nextStep()">
              Next: Upload Files <i class="bi bi-arrow-right ms-2"></i>
            </button>
          </div>
        </div>

        <!-- Step 2: File Uploads -->
        <div class="form-step" id="step2" style="display: none;">
          <h2 class="section-title">
            <i class="bi bi-cloud-upload me-2"></i>Upload Supporting Materials
          </h2>

          <p class="text-muted mb-4">
            Upload documents, images, or videos that support your entry. All files are optional but recommended.
          </p>

          <!-- Supporting Documents -->
          <div class="mb-5">
            <label class="form-label fw-bold">
              <i class="bi bi-file-earmark-pdf me-2"></i>Supporting Documents
            </label>
            <div class="file-upload-zone" id="documentsUploadZone"
                 onclick="document.getElementById('documentsInput').click()">
              <i class="bi bi-cloud-upload fs-1 text-primary mb-3"></i>
              <p class="mb-2"><strong>Click to upload or drag and drop</strong></p>
              <p class="text-muted small">PDF, DOC, DOCX up to 10MB each</p>
            </div>
            <input type="file" id="documentsInput" multiple accept=".pdf,.doc,.docx" style="display: none;">
            <div id="documentsList" class="mt-3"></div>
          </div>

          <!-- Images -->
          <div class="mb-5">
            <label class="form-label fw-bold">
              <i class="bi bi-image me-2"></i>Images
            </label>
            <div class="file-upload-zone" id="imagesUploadZone"
                 onclick="document.getElementById('imagesInput').click()">
              <i class="bi bi-image fs-1 text-primary mb-3"></i>
              <p class="mb-2"><strong>Click to upload or drag and drop</strong></p>
              <p class="text-muted small">JPG, PNG up to 5MB each</p>
            </div>
            <input type="file" id="imagesInput" multiple accept="image/*" style="display: none;">
            <div id="imagesList" class="mt-3"></div>
          </div>

          <!-- Video Links -->
          <div class="mb-4">
            <label class="form-label fw-bold">
              <i class="bi bi-play-btn me-2"></i>Video Links (YouTube, Vimeo, etc.)
            </label>
            <div id="videoLinksContainer">
              <div class="input-group mb-2">
                <input type="url" class="form-control" placeholder="https://youtube.com/watch?v=..."
                       id="videoLink1">
                <button class="btn btn-outline-secondary" type="button" onclick="submissionForm.addVideoLink()">
                  <i class="bi bi-plus-circle"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="d-flex justify-content-between">
            <button type="button" class="btn btn-outline-secondary btn-lg" onclick="submissionForm.prevStep()">
              <i class="bi bi-arrow-left me-2"></i>Back
            </button>
            <button type="button" class="btn btn-primary btn-lg" onclick="submissionForm.nextStep()">
              Next: Review <i class="bi bi-arrow-right ms-2"></i>
            </button>
          </div>
        </div>

        <!-- Step 3: Review -->
        <div class="form-step" id="step3" style="display: none;">
          <h2 class="section-title">
            <i class="bi bi-check-circle me-2"></i>Review Your Entry
          </h2>

          <div id="reviewContent" class="mb-4">
            <!-- Review content will be dynamically generated -->
          </div>

          <!-- Fee Summary -->
          <div class="fee-summary">
            <h4>üí≥ Entry Fee Summary</h4>
            <div class="fee-line">
              <span>Entry Fee:</span>
              <span id="feeAmount">¬£195.00</span>
            </div>
            <div class="fee-line">
              <span>Processing Fee:</span>
              <span id="processingFee">¬£0.00</span>
            </div>
            <div class="fee-line fee-total">
              <span>Total:</span>
              <span id="totalFee">¬£195.00</span>
            </div>
          </div>

          <div class="alert alert-info mt-4">
            <i class="bi bi-info-circle me-2"></i>
            <strong>Next Step:</strong> You'll be redirected to secure payment processing via Stripe.
          </div>

          <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-outline-secondary btn-lg" onclick="submissionForm.prevStep()">
              <i class="bi bi-arrow-left me-2"></i>Back
            </button>
            <button type="button" class="btn-submit-entry" onclick="submissionForm.submitEntry()">
              <i class="bi bi-lock me-2"></i>Proceed to Payment
            </button>
          </div>
        </div>

        <!-- Step 4: Payment (Handled by Stripe) -->
        <div class="form-step" id="step4" style="display: none;">
          <div class="text-center py-5">
            <div class="spinner-border text-primary mb-3" style="width: 3rem; height: 3rem;"></div>
            <h3>Processing Payment...</h3>
            <p class="text-muted">Please wait while we process your submission.</p>
          </div>
        </div>

      </form>

    </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Submission Form Logic -->
  <script src="submit-entry.js"></script>

</body>
</html>
